import{s as rt,o as et,k as nt}from"../chunks/scheduler.CufrTsdM.js";import{S as ot,i as it,c as at,s as q,h as I,a as st,b as V,j as x,o as S,f as B,l as D,m as ut,d as M,t as ct,e as ft,g as ht,x as lt,r as L}from"../chunks/index.CufBhhP2.js";import{e as N}from"../chunks/each.D6YF6ztN.js";import{N as pt}from"../chunks/navbar.boXza36d.js";var dt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function G(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}var F={exports:{}};(function(o,n){var r=typeof self<"u"?self:dt,l=function(){function i(){this.fetch=!1,this.DOMException=r.DOMException}return i.prototype=r,new i}();(function(i){(function(u){var s={searchParams:"URLSearchParams"in i,iterable:"Symbol"in i&&"iterator"in Symbol,blob:"FileReader"in i&&"Blob"in i&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in i,arrayBuffer:"ArrayBuffer"in i};function p(t){return t&&DataView.prototype.isPrototypeOf(t)}if(s.arrayBuffer)var h=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],v=ArrayBuffer.isView||function(t){return t&&h.indexOf(Object.prototype.toString.call(t))>-1};function b(t){if(typeof t!="string"&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function f(t){return typeof t!="string"&&(t=String(t)),t}function w(t){var e={next:function(){var d=t.shift();return{done:d===void 0,value:d}}};return s.iterable&&(e[Symbol.iterator]=function(){return e}),e}function m(t){this.map={},t instanceof m?t.forEach(function(e,d){this.append(d,e)},this):Array.isArray(t)?t.forEach(function(e){this.append(e[0],e[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}m.prototype.append=function(t,e){t=b(t),e=f(e);var d=this.map[t];this.map[t]=d?d+", "+e:e},m.prototype.delete=function(t){delete this.map[b(t)]},m.prototype.get=function(t){return t=b(t),this.has(t)?this.map[t]:null},m.prototype.has=function(t){return this.map.hasOwnProperty(b(t))},m.prototype.set=function(t,e){this.map[b(t)]=f(e)},m.prototype.forEach=function(t,e){for(var d in this.map)this.map.hasOwnProperty(d)&&t.call(e,this.map[d],d,this)},m.prototype.keys=function(){var t=[];return this.forEach(function(e,d){t.push(d)}),w(t)},m.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),w(t)},m.prototype.entries=function(){var t=[];return this.forEach(function(e,d){t.push([d,e])}),w(t)},s.iterable&&(m.prototype[Symbol.iterator]=m.prototype.entries);function A(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function c(t){return new Promise(function(e,d){t.onload=function(){e(t.result)},t.onerror=function(){d(t.error)}})}function U(t){var e=new FileReader,d=c(e);return e.readAsArrayBuffer(t),d}function J(t){var e=new FileReader,d=c(e);return e.readAsText(t),d}function K(t){for(var e=new Uint8Array(t),d=new Array(e.length),_=0;_<e.length;_++)d[_]=String.fromCharCode(e[_]);return d.join("")}function z(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function k(){return this.bodyUsed=!1,this._initBody=function(t){this._bodyInit=t,t?typeof t=="string"?this._bodyText=t:s.blob&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:s.formData&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s.arrayBuffer&&s.blob&&p(t)?(this._bodyArrayBuffer=z(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(t)||v(t))?this._bodyArrayBuffer=z(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||(typeof t=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var t=A(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?A(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(U)}),this.text=function(){var t=A(this);if(t)return t;if(this._bodyBlob)return J(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(K(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s.formData&&(this.formData=function(){return this.text().then(Y)}),this.json=function(){return this.text().then(JSON.parse)},this}var Q=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function W(t){var e=t.toUpperCase();return Q.indexOf(e)>-1?e:t}function E(t,e){e=e||{};var d=e.body;if(t instanceof E){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new m(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,!d&&t._bodyInit!=null&&(d=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",(e.headers||!this.headers)&&(this.headers=new m(e.headers)),this.method=W(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&d)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(d)}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function Y(t){var e=new FormData;return t.trim().split("&").forEach(function(d){if(d){var _=d.split("="),g=_.shift().replace(/\+/g," "),y=_.join("=").replace(/\+/g," ");e.append(decodeURIComponent(g),decodeURIComponent(y))}}),e}function Z(t){var e=new m,d=t.replace(/\r?\n[\t ]+/g," ");return d.split(/\r?\n/).forEach(function(_){var g=_.split(":"),y=g.shift().trim();if(y){var O=g.join(":").trim();e.append(y,O)}}),e}k.call(E.prototype);function j(t,e){e||(e={}),this.type="default",this.status=e.status===void 0?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new m(e.headers),this.url=e.url||"",this._initBody(t)}k.call(j.prototype),j.prototype.clone=function(){return new j(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new m(this.headers),url:this.url})},j.error=function(){var t=new j(null,{status:0,statusText:""});return t.type="error",t};var tt=[301,302,303,307,308];j.redirect=function(t,e){if(tt.indexOf(e)===-1)throw new RangeError("Invalid status code");return new j(null,{status:e,headers:{location:t}})},u.DOMException=i.DOMException;try{new u.DOMException}catch{u.DOMException=function(e,d){this.message=e,this.name=d;var _=Error(e);this.stack=_.stack},u.DOMException.prototype=Object.create(Error.prototype),u.DOMException.prototype.constructor=u.DOMException}function P(t,e){return new Promise(function(d,_){var g=new E(t,e);if(g.signal&&g.signal.aborted)return _(new u.DOMException("Aborted","AbortError"));var y=new XMLHttpRequest;function O(){y.abort()}y.onload=function(){var T={status:y.status,statusText:y.statusText,headers:Z(y.getAllResponseHeaders()||"")};T.url="responseURL"in y?y.responseURL:T.headers.get("X-Request-URL");var C="response"in y?y.response:y.responseText;d(new j(C,T))},y.onerror=function(){_(new TypeError("Network request failed"))},y.ontimeout=function(){_(new TypeError("Network request failed"))},y.onabort=function(){_(new u.DOMException("Aborted","AbortError"))},y.open(g.method,g.url,!0),g.credentials==="include"?y.withCredentials=!0:g.credentials==="omit"&&(y.withCredentials=!1),"responseType"in y&&s.blob&&(y.responseType="blob"),g.headers.forEach(function(T,C){y.setRequestHeader(C,T)}),g.signal&&(g.signal.addEventListener("abort",O),y.onreadystatechange=function(){y.readyState===4&&g.signal.removeEventListener("abort",O)}),y.send(typeof g._bodyInit>"u"?null:g._bodyInit)})}return P.polyfill=!0,i.fetch||(i.fetch=P,i.Headers=m,i.Request=E,i.Response=j),u.Headers=m,u.Request=E,u.Response=j,u.fetch=P,Object.defineProperty(u,"__esModule",{value:!0}),u})({})})(l),l.fetch.ponyfill=!0,delete l.fetch.polyfill;var a=l;n=a.fetch,n.default=a.fetch,n.fetch=a.fetch,n.Headers=a.Headers,n.Request=a.Request,n.Response=a.Response,o.exports=n})(F,F.exports);var yt=F.exports;const mt=G(yt);class bt{constructor(n){n&&console.error(["No arguments accepted to npyjs constructor.","For usage, go to https://github.com/jhuapl-boss/npyjs."].join(" ")),this.dtypes={"<u1":{name:"uint8",size:8,arrayConstructor:Uint8Array},"|u1":{name:"uint8",size:8,arrayConstructor:Uint8Array},"<u2":{name:"uint16",size:16,arrayConstructor:Uint16Array},"|i1":{name:"int8",size:8,arrayConstructor:Int8Array},"<i2":{name:"int16",size:16,arrayConstructor:Int16Array},"<u4":{name:"uint32",size:32,arrayConstructor:Int32Array},"<i4":{name:"int32",size:32,arrayConstructor:Int32Array},"<u8":{name:"uint64",size:64,arrayConstructor:BigUint64Array},"<i8":{name:"int64",size:64,arrayConstructor:BigInt64Array},"<f4":{name:"float32",size:32,arrayConstructor:Float32Array},"<f8":{name:"float64",size:64,arrayConstructor:Float64Array}}}parse(n){const r=new DataView(n.slice(8,10)).getUint8(0),l=10+r,a=new TextDecoder("utf-8").decode(new Uint8Array(n.slice(10,10+r))),i=JSON.parse(a.toLowerCase().replace(/'/g,'"').replace("(","[").replace(/,*\),*/g,"]")),u=i.shape,s=this.dtypes[i.descr],p=new s.arrayConstructor(n,l);return{dtype:s.name,data:p,shape:u,fortranOrder:i.fortran_order}}async load(n,r,l){l=l||{};let a;n instanceof ArrayBuffer?a=n:a=await(await mt(n,{...l})).arrayBuffer();const i=this.parse(a);return r?r(i):i}}function vt(o){for(var n=new Array(o),r=0;r<o;++r)n[r]=r;return n}var gt=vt;/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var _t=function(o){return o!=null&&(X(o)||wt(o)||!!o._isBuffer)};function X(o){return!!o.constructor&&typeof o.constructor.isBuffer=="function"&&o.constructor.isBuffer(o)}function wt(o){return typeof o.readFloatLE=="function"&&typeof o.slice=="function"&&X(o.slice(0,0))}var At=gt,jt=_t,Et=typeof Float64Array<"u";function Bt(o,n){return o[0]-n[0]}function Tt(){var o=this.stride,n=new Array(o.length),r;for(r=0;r<n.length;++r)n[r]=[Math.abs(o[r]),r];n.sort(Bt);var l=new Array(n.length);for(r=0;r<l.length;++r)l[r]=n[r][1];return l}function Ot(o,n){var r=["View",n,"d",o].join("");n<0&&(r="View_Nil"+o);var l=o==="generic";if(n===-1){var a="function "+r+"(a){this.data=a;};var proto="+r+".prototype;proto.dtype='"+o+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+r+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+r+"(a){return new "+r+"(a);}",A=new Function(a);return A()}else if(n===0){var a="function "+r+"(a,d) {this.data = a;this.offset = d};var proto="+r+".prototype;proto.dtype='"+o+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+r+"_copy() {return new "+r+"(this.data,this.offset)};proto.pick=function "+r+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+r+"_get(){return "+(l?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+r+"_set(v){return "+(l?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+r+"(a,b,c,d){return new "+r+"(a,d)}",A=new Function("TrivialArray",a);return A(R[o][0])}var a=["'use strict'"],i=At(n),u=i.map(function(c){return"i"+c}),s="this.offset+"+i.map(function(c){return"this.stride["+c+"]*i"+c}).join("+"),p=i.map(function(c){return"b"+c}).join(","),h=i.map(function(c){return"c"+c}).join(",");a.push("function "+r+"(a,"+p+","+h+",d){this.data=a","this.shape=["+p+"]","this.stride=["+h+"]","this.offset=d|0}","var proto="+r+".prototype","proto.dtype='"+o+"'","proto.dimension="+n),a.push("Object.defineProperty(proto,'size',{get:function "+r+"_size(){return "+i.map(function(c){return"this.shape["+c+"]"}).join("*"),"}})"),n===1?a.push("proto.order=[0]"):(a.push("Object.defineProperty(proto,'order',{get:"),n<4?(a.push("function "+r+"_order(){"),n===2?a.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):n===3&&a.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):a.push("ORDER})")),a.push("proto.set=function "+r+"_set("+u.join(",")+",v){"),l?a.push("return this.data.set("+s+",v)}"):a.push("return this.data["+s+"]=v}"),a.push("proto.get=function "+r+"_get("+u.join(",")+"){"),l?a.push("return this.data.get("+s+")}"):a.push("return this.data["+s+"]}"),a.push("proto.index=function "+r+"_index(",u.join(),"){return "+s+"}"),a.push("proto.hi=function "+r+"_hi("+u.join(",")+"){return new "+r+"(this.data,"+i.map(function(c){return["(typeof i",c,"!=='number'||i",c,"<0)?this.shape[",c,"]:i",c,"|0"].join("")}).join(",")+","+i.map(function(c){return"this.stride["+c+"]"}).join(",")+",this.offset)}");var v=i.map(function(c){return"a"+c+"=this.shape["+c+"]"}),b=i.map(function(c){return"c"+c+"=this.stride["+c+"]"});a.push("proto.lo=function "+r+"_lo("+u.join(",")+"){var b=this.offset,d=0,"+v.join(",")+","+b.join(","));for(var f=0;f<n;++f)a.push("if(typeof i"+f+"==='number'&&i"+f+">=0){d=i"+f+"|0;b+=c"+f+"*d;a"+f+"-=d}");a.push("return new "+r+"(this.data,"+i.map(function(c){return"a"+c}).join(",")+","+i.map(function(c){return"c"+c}).join(",")+",b)}"),a.push("proto.step=function "+r+"_step("+u.join(",")+"){var "+i.map(function(c){return"a"+c+"=this.shape["+c+"]"}).join(",")+","+i.map(function(c){return"b"+c+"=this.stride["+c+"]"}).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(var f=0;f<n;++f)a.push("if(typeof i"+f+"==='number'){d=i"+f+"|0;if(d<0){c+=b"+f+"*(a"+f+"-1);a"+f+"=ceil(-a"+f+"/d)}else{a"+f+"=ceil(a"+f+"/d)}b"+f+"*=d}");a.push("return new "+r+"(this.data,"+i.map(function(c){return"a"+c}).join(",")+","+i.map(function(c){return"b"+c}).join(",")+",c)}");for(var w=new Array(n),m=new Array(n),f=0;f<n;++f)w[f]="a[i"+f+"]",m[f]="b[i"+f+"]";a.push("proto.transpose=function "+r+"_transpose("+u+"){"+u.map(function(c,U){return c+"=("+c+"===undefined?"+U+":"+c+"|0)"}).join(";"),"var a=this.shape,b=this.stride;return new "+r+"(this.data,"+w.join(",")+","+m.join(",")+",this.offset)}"),a.push("proto.pick=function "+r+"_pick("+u+"){var a=[],b=[],c=this.offset");for(var f=0;f<n;++f)a.push("if(typeof i"+f+"==='number'&&i"+f+">=0){c=(c+this.stride["+f+"]*i"+f+")|0}else{a.push(this.shape["+f+"]);b.push(this.stride["+f+"])}");a.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),a.push("return function construct_"+r+"(data,shape,stride,offset){return new "+r+"(data,"+i.map(function(c){return"shape["+c+"]"}).join(",")+","+i.map(function(c){return"stride["+c+"]"}).join(",")+",offset)}");var A=new Function("CTOR_LIST","ORDER",a.join(`
`));return A(R[o],Tt)}function Dt(o){if(jt(o))return"buffer";if(Et)switch(Object.prototype.toString.call(o)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(o)?"array":"generic"}var R={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};function Rt(o,n,r,l){if(o===void 0){var h=R.array[0];return h([])}else typeof o=="number"&&(o=[o]);n===void 0&&(n=[o.length]);var a=n.length;if(r===void 0){r=new Array(a);for(var i=a-1,u=1;i>=0;--i)r[i]=u,u*=n[i]}if(l===void 0){l=0;for(var i=0;i<a;++i)r[i]<0&&(l-=(n[i]-1)*r[i])}for(var s=Dt(o),p=R[s];p.length<=a+1;)p.push(Ot(s,p.length-1));var h=p[a+1];return h(o,n,r,l)}var Ut=Rt;const Pt=G(Ut);function H(o,n,r){const l=o.slice();return l[5]=n[r],l[6]=n,l[7]=r,l}function $(o){let n,r,l=o[6],a=o[7],i;const u=()=>o[1](r,l,a),s=()=>o[1](null,l,a);return{c(){n=I("div"),r=I("canvas"),i=q(),this.h()},l(p){n=x(p,"DIV",{class:!0});var h=S(n);r=x(h,"CANVAS",{width:!0,height:!0}),S(r).forEach(B),i=V(h),h.forEach(B),this.h()},h(){D(r,"width","280"),D(r,"height","280"),D(n,"class","column is-3")},m(p,h){M(p,n,h),L(n,r),u(),L(n,i)},p(p,h){o=p,(l!==o[6]||a!==o[7])&&(s(),l=o[6],a=o[7],u())},d(p){p&&B(n),s()}}}function Ct(o){let n,r,l,a;n=new pt({});let i=N(o[0]),u=[];for(let s=0;s<i.length;s+=1)u[s]=$(H(o,i,s));return{c(){at(n.$$.fragment),r=q(),l=I("div");for(let s=0;s<u.length;s+=1)u[s].c();this.h()},l(s){st(n.$$.fragment,s),r=V(s),l=x(s,"DIV",{class:!0});var p=S(l);for(let h=0;h<u.length;h+=1)u[h].l(p);p.forEach(B),this.h()},h(){D(l,"class","columns")},m(s,p){ut(n,s,p),M(s,r,p),M(s,l,p);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(l,null);a=!0},p(s,[p]){if(p&1){i=N(s[0]);let h;for(h=0;h<i.length;h+=1){const v=H(s,i,h);u[h]?u[h].p(v,p):(u[h]=$(v),u[h].c(),u[h].m(l,null))}for(;h<u.length;h+=1)u[h].d(1);u.length=i.length}},i(s){a||(ct(n.$$.fragment,s),a=!0)},o(s){ft(n.$$.fragment,s),a=!1},d(s){s&&(B(r),B(l)),ht(n,s),lt(u,s)}}}function It(o,n,r){const l=[{epoch:9,digit:0,vec:9,canvas:null},{epoch:9,digit:1,vec:9,canvas:null},{epoch:9,digit:2,vec:9,canvas:null}];et(()=>{i()});const a=p=>{const h=[[103,0,31],[178,24,43],[214,96,77],[244,165,130],[253,219,199],[247,247,247],[209,229,240],[146,197,222],[67,147,195],[33,102,172],[5,48,97]];p=Math.max(-1,Math.min(1,p));const v=(p+1)*5,b=Math.floor(v),f=v-b,w=h[Math.min(b,10)],m=h[Math.min(b+1,10)];return!w||!m?[0,0,0]:w.map((A,c)=>Math.round(A*(1-f)+m[c]*f))};async function i(){const h=await new bt().load("tensors/vecs.npy"),v=Pt(h.data,h.shape);l.forEach(b=>{u(v.pick(b.epoch,b.digit,b.vec),b.canvas)})}function u(p,h){const v=h.getContext("2d");if(!v)return;const b=v.createImageData(28,28);for(let f=0;f<784;f++){const w=a(p.get(f)*3/255);b.data[f*4]=w[0],b.data[f*4+1]=w[1],b.data[f*4+2]=w[2],b.data[f*4+3]=255}v.imageSmoothingEnabled=!1,v.putImageData(b,0,0),v.drawImage(h,0,0,28,28,0,0,280,280)}function s(p,h,v){nt[p?"unshift":"push"](()=>{h[v].canvas=p,r(0,l)})}return[l,s]}class zt extends ot{constructor(n){super(),it(this,n,It,Ct,rt,{})}}export{zt as component};
